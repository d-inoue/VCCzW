{
  "name": "mariadb",
  "description": "Installs and configures mariadb for client or server",
  "long_description": "mariadb Cookbook\n==============\n[![Build Status](https://secure.travis-ci.org/joerocklin/chef-mariadb.png?branch=master)](http://travis-ci.org/joerocklin/chef-mariadb)\n\nInstalls and configures MariaDB client or server.\n\nA word of caution: I have not tested it on anything beside CentOS 6.4 with chef\nsolo. I would be happy to accept patches for other platforms!\n\nRequirements\n------------\nChef 0.10.10+.\n\nPlatform\n--------\n- Debian, Ubuntu\n- CentOS, Red Hat, Fedora\n- Mac OS X (Using homebrew)\n\nTested on:\n\n- CentOS 5.10, 6.5, 7.0\n- Ubuntu 10.04, 12.04, 14.04\n\nSee TESTING.md for information about running tests in Opscode's Test Kitchen.\n\n\nCookbooks\n---------\nRequires Opscode's openssl cookbook for secure password generation. See _Attributes_ and _Usage_ for more information.\n\nThe RubyGem installation in the `mysql::ruby` recipe requires a C compiler and Ruby development headers to be installed in order to build the mysql gem.\n\nThe RubyGem installation in the `mariadb::ruby` recipe requires a C compiler and Ruby development headers to be installed in order to build the mariadb gem.\n\nRequires `homebrew` [cookbook](http://community.opscode.com/cookbooks/homebrew) on Mac OS X.\n\nResources and Providers\n-----------------------\nThe LWRP that used to ship as part of this cookbook has been refactored into the\n[database](http://community.opscode.com/cookbooks/database) cookbook. Please see the README for details on updated usage.\n\n\nAttributes\n----------\nSee the `attributes/server.rb` or `attributes/client.rb` for default values. Several attributes have values that vary based on the node's platform and version.\n\n* `node['mariadb']['port']` - Listen port for MySQLd\n* `node['mariadb']['data_dir']` - Location for mysql data directory. `WARNING` This will only on initial converge. It will not move data around if you change it.\n\n* `node['mariadb']['client']['packages']` - An array of package names\n  that should be installed on \"client\" systems. This can be modified,\n  e.g., to specify packages for Percona.\n* `node['mariadb']['server']['packages']` - An array of package names\n  that should be installed on \"server\" systems. This can be modified,\n  e.g., to specify packages for Percona.\n\n* `node['mariadb']['auto-increment-increment']` - auto-increment-increment value in my.cnf\n* `node['mariadb']['auto-increment-offset]` - auto-increment-offset value in my.cnf\n* `node['mariadb']['server']['basedir']` - Base directory where MariaDB is installed\n* `node['mariadb']['bind_address']` - Listen address for MariaDBd\n* `node['mariadb']['ec2_path']` - location of mariadb data_dir on EC2 nodes\n* `node['mariadb']['grants_path']` - Path where the grants.sql should be written\n* `node['mariadb']['mysqladmin_bin']` - Path to the mysqladmin binary\n* `node['mariadb']['server']['old_passwords']` - Sets the `old_passwords` value in my.cnf.\n* `node['mariadb']['server']['pid_file']` - Path to the mariadbd.pid file\n* `node['mariadb']['server']['reload_action']` - Action to take when mariadb conf files are modified. Also allows \"reload\" and \"none\".\n* `node['mariadb']['server']['root_group']` - The default group of the \"root\" user\n* `node['mariadb']['server']['service_name']` - The name of the mariadbd service\n* `node['mariadb']['server']['socket']` - Path to the mariadbd.sock file\n* `node['mariadb']['root_network_acl']` - Set define the network the root user will be able to login from, default is nil\n\nPerformance and other \"tunable\" attributes are under the `node['mariadb']['tunable']` attribute, corresponding to the same-named parameter in my.cnf, and the default values are used. See `attributes/server.rb`.\n\nBy default, a MariaDB installation has an anonymous user, allowing anyone to log into MariaDB without having to have a user account created for them.  This is intended only for testing, and to make the installation go a bit smoother.  You should remove them before moving into a production environment.\n\n* `node['mariadb']['remove_anonymous_users']` - Remove anonymous users\n\nNormally, root should only be allowed to connect from 'localhost'.  This ensures that someone cannot guess at the root password from the network.\n\n* `node['mariadb']['allow_remote_root']` - If true Sets root access from '%'. If false deletes any non-localhost root users.\n\n\n* `node['mariadb']['remove_test_database']` - Delete the test database and access to it.\n\nThe following attributes are randomly generated passwords handled in the `mariadb::server` recipe, using the OpenSSL cookbook's `secure_password` helper method. These are set using the `set_unless` node attribute method, which allows them to be easily overridden e.g. in a role.\n\n* `node['mariadb']['server_root_password']` - Set the server's root password\n* `node['mariadb']['server_repl_password']` - Set the replication user 'repl' password\n* `node['mariadb']['server_debian_password']` - Set the debian-sys-maint user password\n\n### Windows Specific\n\nThe following attributes are specific to Windows platforms.\n\n* `node['mariadb']['client']['version']` - The version of MariaDB\n  connector to install.\n* `node['mariadb']['client']['arch']` - Force 32 bit to work with the\n  mariadb gem\n* `node['mariadb']['client']['package_file']` - The MSI file for the\n  mariadb connector.\n* `node['mariadb']['client']['url']` - URL to download the mariadb\n  connector.\n* `node['mariadb']['client']['packages']` - Similar to other platforms,\n  this is the name of the client package.\n* `node['mariadb']['client']['basedir']` - Base installation location\n* `node['mariadb']['client']['lib_dir']` - Libraries under the base location\n* `node['mariadb']['client']['bin_dir']` - binary directory under base location\n* `node['mariadb']['client']['ruby_dir']` - location where the Ruby\n  binaries will be\n\n## Security Options\n\nFurther information is already available at [Symantec](http://www.symantec.com/connect/articles/securing-mysql-step-step) and [Deutsche Telekom (German)](http://www.telekom.com/static/-/155996/7/technische-sicherheitsanforderungen-si)\n\n* default['mariadb']['security']['chroot'] - [chroot](http://dev.mysql.com/doc/refman/5.7/en/server-options.html#option_mysqld_chroot)\n* default['mariadb']['security']['safe_user_create'] - [safe-user-create](http://dev.mysql.com/doc/refman/5.7/en/server-options.html#option_mysqld_safe-user-create)\n* default['mariadb']['security']['secure_auth'] - [secure-auth](http://dev.mysql.com/doc/refman/5.7/en/server-options.html#option_mysqld_secure-auth)\n* default['mariadb']['security']['skip_symbolic_links'] - [skip-symbolic-links](http://dev.mysql.com/doc/refman/5.7/en/server-\noptions.html#option_mysqld_symbolic-links)\n* default['mariadb']['security']['skip_show_database'] - [skip-show-database](http://dev.mysql.com/doc/refman/5.7/en/server-options.html#option_mysqld_skip-show-database)\n* default['mariadb']['security']['local_infile'] - [local-infile](http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_local_infile)\n\nUsage\n-----\nOn client nodes, use the client (or default) recipe:\n\n```javascript\n    { \"run_list\": [\"recipe[mariadb::client]\"] }\n```\n\nThis will install the MariaDB client libraries and development headers on the system.\n\nOn nodes which may use the `database` cookbook's mariadb resources, also use the ruby recipe. This installs the mariadb RubyGem in the Ruby environment Chef is using via `chef_gem`.\n\n```javascript\n{ \"run_list\": [\"recipe[mariadb::client]\", \"recipe[mariadb::ruby]\"] }\n```\n\nIf you need to install the mariadb Ruby library as a package for your system, override the client packages attribute in your node or role. For example, on an Ubuntu system:\n\n```javascript\n{\n  \"mariadb\": {\n    \"client\": {\n      \"packages\": [\"mariadb-client\", \"libmariadbclient-dev\",\"ruby-mariadb\"]\n    }\n  }\n}\n```\n\nThis creates a resource object for the package and does the installation before other recipes are parsed. You'll need to have the C compiler and such (ie, build-essential on Ubuntu) before running the recipes, but we already do that when installing Chef :-).\n\nOn server nodes, use the server recipe:\n\n```javascript\n    { \"run_list\": [\"recipe[mariadb::server]\"] }\n```\n\nOn Debian and Ubuntu, this will preseed the mariadb-server package with the randomly generated root password in the recipe file. On other platforms, it simply installs the required packages. It will also create an SQL file, `/etc/mariadb/grants.sql`, that will be used to set up grants for the root, repl and debian-sys-maint users.\n\nThe recipe will perform a `node.save` unless it is run under `chef-solo` after the password attributes are used to ensure that in the event of a failed run, the saved attributes would be used.\n\nOn EC2 nodes, use the `server_ec2` recipe and the mariadb data dir will be set up in the ephmeral storage.\n\n```javascript\n    { \"run_list\": [\"recipe[mariadb::server_ec2]\"] }\n```\n\n\nWhen the `ec2_path` doesn't exist we look for a mounted filesystem (eg, EBS) and move the data_dir there.\n\nThe client recipe is already included by server and 'default' recipes.\n\nFor more infromation on the compile vs execution phase of a Chef run:\n\n- http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run\n\nChef Solo Note\n--------------\n\nThese node attributes are stored on the Chef server when using `chef-client`. Because `chef-solo` does not connect to a server or save the node object at all, to have the same passwords persist across `chef-solo` runs, you must specify them in the `json_attribs` file used. For example:\n\n```javascript\n    {\n      \"mariadb\": {\n        \"server_root_password\": \"iloverandompasswordsbutthiswilldo\",\n        \"server_repl_password\": \"iloverandompasswordsbutthiswilldo\",\n        \"server_debian_password\": \"iloverandompasswordsbutthiswilldo\"\n      },\n      \"run_list\":[\"recipe[mariadb::server]\"]\n    }\n```\n\n\n\nLicense & Authors\n-----------------\n- Author:: Joshua Timberman (<joshua@opscode.com>)\n- Author:: AJ Christensen (<aj@opscode.com>)\n- Author:: Seth Chisamore (<schisamo@opscode.com>)\n- Author:: Brian Bianco (<brian.bianco@gmail.com>)\n- Author:: Jesse Howarth (<him@jessehowarth.com>)\n- Author:: Andrew Crump (<andrew@kotirisoftware.com>)\n- Author:: Christoph Hartmann (<chris@lollyrock.com>)\n- Author:: Sean OMeara (<someara@opscode.com>)\n\n```text\nCopyright:: 2009-2013 Opscode, Inc\n\n- Author:: Joe Rocklin (<joe.rocklin@gmail.com>)\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n```\n",
  "maintainer": "Joe Rocklin",
  "maintainer_email": "joe.rocklin@gmail.com",
  "license": "Apache 2.0",
  "platforms": {
    "centos": ">= 0.0.0",
    "debian": ">= 0.0.0",
    "ubuntu": ">= 0.0.0",
    "redhat": ">= 0.0.0",
    "amazon": ">= 0.0.0",
    "freebsd": ">= 0.0.0",
    "mac_os_x": ">= 0.0.0",
    "scientific": ">= 0.0.0",
    "suse": ">= 0.0.0",
    "windows": ">= 0.0.0"
  },
  "dependencies": {
    "yum": "~> 3.0",
    "yum-epel": ">= 0.0.0",
    "apt": "~> 2.0",
    "openssl": "~> 2.0",
    "build-essential": "~> 2.0"
  },
  "recommendations": {
  },
  "suggestions": {
  },
  "conflicting": {
  },
  "providing": {
  },
  "replacing": {
  },
  "attributes": {
  },
  "groupings": {
  },
  "recipes": {
    "mariadb": "Includes the client recipe to configure a client",
    "mariadb::client": "Installs packages required for mariadb clients using run_action magic",
    "mariadb::server": "Installs packages required for mariadb servers w/o manual intervention",
    "mariadb::server_ec2": "Performs EC2-specific mountpoint manipulation"
  },
  "version": "2.1.1",
  "source_url": "",
  "issues_url": ""
}